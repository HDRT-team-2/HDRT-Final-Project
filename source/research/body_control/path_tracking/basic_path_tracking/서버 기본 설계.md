기본 설계

---
가. 전역 변수  
1. 통합 전장 상황 관리 변수  
- 1.1. 지형 정보 리스트  
- 1.2. 적 전차 정보 리스트  
- 1.3. 현재 목표 여부 변수  
- 1.4. 전차 좌표 정보  
- 1.5. 거리 초과 여부  
- 1.6. 장애물 리스트  
2. 경로 변수  

---

나. 통합 전장 상황 인식 모듈(YOLO + LIDAR)  
- 작동 API: '/detect' 호출 시 작동
- 1. 적 전차 인식 시 좌표 산출 후 통합 전장 상황 관리 변수 업데이트  
  - (예: `/detect` API로부터 이미지 수신 → YOLO로 적 전차 좌표 추출 → 전역 변수 갱신)
- 2. 객체 인식된 장애물의 좌표를 통합 전장 상황 관리 변수에 업데이트  
  - (예: `/detect` API로부터 이미지 수신 → LIDAR/YOLO 등으로 장애물 좌표 추출 → 전역 변수 갱신)

---

다. 사격 통제 모듈  
- 작동 API: '/get_action' 호출 시 작동
- 1. 통합 전장 상황 관리 변수 상 미 파괴된 적 전차 확인 시 좌표 불러오기 + 현재 목표 전차 변수 갱신  
- 2. 거리 계산  
  - 2.1. 사격 가능 거리 미만 시  
    - 2.1.1. 조준선 정렬 및 영점 조절(기존 사격 데이터 기반으로 생성한 회귀 모델 사용)  
	- 적 전차와 내 전차의 거리와 각도 계산
    (양 측의 x, y, z 좌표에 의거)
    - 2.1.2. 발사  
    - 2.1.3. 파괴 여부 판단 - 파괴 시 통합 전장 상황 관리 변수 갱신  
      - → '/detect' 객체 인식 호출하여 기존 타겟 전차가 인식되는지 확인으로 파괴 여부 판단 
    - 2.1.4. 파괴 여부 판단 - 미파괴 시 재 사격 진행(재귀 함수 처리)  
      - → `/get_action` (POST): 사격 명령 포함 액션 명령 응답  
      - → `/update_bullet` (POST): 포탄 충돌 정보 수신
  - 2.2. 사격 가능 거리 초과 시  
    - 2.2.1. **통합 전장 상황 관리 변수에 거리 초과 여부 갱신**

---

라. 주행 모듈  
- 작동 API: '/get_action' 호출 시 작동
- 1. 경로 변수에 저장된 경로 정보, '/info'를 통해 전차의 현 위치를 불러옴  
- 2. 경로에 따라 시뮬레이터로 주행 명령 전달  
  - → `/get_action` (POST): 이동 명령 포함 액션 명령 응답  

---

마. 경로 탐색 모듈  
- 작동 함수: '/get_action' 호출 시 작동
- 1. 현재 목표 대상인 적 전차의 좌표, 거리 초과 여부를 호출  
- 2. 경로 산출(A star, 다익스트라)  
  - → `/info` (POST): 시뮬레이터에서 주기적으로 위치/속도 등 정보 수신
- 3. 경로 형태에 따른 보정 경로 적용
  - 2.1. 직선 구간 -> MAX 속도 (65km/h) 주행 구간  
  - 2.2. 감속 구간 -> 코너링 MAX 속도(약 25km/h)까지 감속하는 구간  
  - 2.3. 코너 구간 -> 코너링 수행하는 구간  
- 4. 경로 변수에 보정된 경로 정보 저장

—
바. 회피 모듈
- 작동 API: '/get_action' 호출 시 작동
- 1. 라이다 센서(8채널짜리, 차체에 장착) 상 12시 방향이 붉은색일 경우 차체 회전
    (회전 방향은 좌/우 평균 거리 비교해서 재연성이 높은 쪽으로)
- 2. 라이다 센서 상 12시 방향 좌우 30도가 녹색일 경우, 직진 가능으로 판단, 회피모듈 종료(아마도 다시 주행모듈로 돌아갈거)
